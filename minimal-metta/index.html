<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../CONTRIBUTING/ rel=next><link rel=icon href=../assets/P8T2_ASO_400x400.jpg><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.6"><title>Minimal Metta - OpenCog Hyperon</title><link rel=stylesheet href=../assets/stylesheets/main.50c56a3b.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/_mkdocstrings.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#minimal-instruction-set class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> For updates follow <a rel=me href=https://twitter.com/OpenCog> <span class=twemoji> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </span> <strong>OpenCog Hyperon</strong> </a> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="OpenCog Hyperon" class="md-header__button md-logo" aria-label="OpenCog Hyperon" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> OpenCog Hyperon </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Minimal Metta </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=purple aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=lime aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/trueagi-io/hyperon-experimental title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> trueagi-io/hyperon-experimental </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="OpenCog Hyperon" class="md-nav__button md-logo" aria-label="OpenCog Hyperon" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> OpenCog Hyperon </label> <div class=md-nav__source> <a href=https://github.com/trueagi-io/hyperon-experimental title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> trueagi-io/hyperon-experimental </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Minimal Metta </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Minimal Metta </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#interpreter-state class=md-nav__link> <span class=md-ellipsis> Interpreter state </span> </a> </li> <li class=md-nav__item> <a href=#evaluation-order class=md-nav__link> <span class=md-ellipsis> Evaluation order </span> </a> </li> <li class=md-nav__item> <a href=#erroremptynotreducible class=md-nav__link> <span class=md-ellipsis> Error/Empty/NotReducible/() </span> </a> </li> <li class=md-nav__item> <a href=#eval class=md-nav__link> <span class=md-ellipsis> eval </span> </a> </li> <li class=md-nav__item> <a href=#chain class=md-nav__link> <span class=md-ellipsis> chain </span> </a> </li> <li class=md-nav__item> <a href=#functionreturn class=md-nav__link> <span class=md-ellipsis> function/return </span> </a> </li> <li class=md-nav__item> <a href=#unify class=md-nav__link> <span class=md-ellipsis> unify </span> </a> </li> <li class=md-nav__item> <a href=#cons-atomdecons-atom class=md-nav__link> <span class=md-ellipsis> cons-atom/decons-atom </span> </a> </li> <li class=md-nav__item> <a href=#collapse-bind class=md-nav__link> <span class=md-ellipsis> collapse-bind </span> </a> </li> <li class=md-nav__item> <a href=#superpose-bind class=md-nav__link> <span class=md-ellipsis> superpose-bind </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../CONTRIBUTING/ class=md-nav__link> <span class=md-ellipsis> Contribution </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Python Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Python Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../reference/atoms/ class=md-nav__link> <span class=md-ellipsis> Atoms </span> </a> </li> <li class=md-nav__item> <a href=../reference/base/ class=md-nav__link> <span class=md-ellipsis> Base </span> </a> </li> <li class=md-nav__item> <a href=../reference/ext/ class=md-nav__link> <span class=md-ellipsis> Ext </span> </a> </li> <li class=md-nav__item> <a href=../reference/runner/ class=md-nav__link> <span class=md-ellipsis> Runner </span> </a> </li> <li class=md-nav__item> <a href=../reference/stdlib/ class=md-nav__link> <span class=md-ellipsis> Stdlib </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../mainpage.md class=md-nav__link> <span class=md-ellipsis> C Reference </span> </a> </li> <li class=md-nav__item> <a href=../html class=md-nav__link> <span class=md-ellipsis> Doxygen </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#interpreter-state class=md-nav__link> <span class=md-ellipsis> Interpreter state </span> </a> </li> <li class=md-nav__item> <a href=#evaluation-order class=md-nav__link> <span class=md-ellipsis> Evaluation order </span> </a> </li> <li class=md-nav__item> <a href=#erroremptynotreducible class=md-nav__link> <span class=md-ellipsis> Error/Empty/NotReducible/() </span> </a> </li> <li class=md-nav__item> <a href=#eval class=md-nav__link> <span class=md-ellipsis> eval </span> </a> </li> <li class=md-nav__item> <a href=#chain class=md-nav__link> <span class=md-ellipsis> chain </span> </a> </li> <li class=md-nav__item> <a href=#functionreturn class=md-nav__link> <span class=md-ellipsis> function/return </span> </a> </li> <li class=md-nav__item> <a href=#unify class=md-nav__link> <span class=md-ellipsis> unify </span> </a> </li> <li class=md-nav__item> <a href=#cons-atomdecons-atom class=md-nav__link> <span class=md-ellipsis> cons-atom/decons-atom </span> </a> </li> <li class=md-nav__item> <a href=#collapse-bind class=md-nav__link> <span class=md-ellipsis> collapse-bind </span> </a> </li> <li class=md-nav__item> <a href=#superpose-bind class=md-nav__link> <span class=md-ellipsis> superpose-bind </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/trueagi-io/hyperon-experimental/edit/master/docs/minimal-metta.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <a href=https://github.com/trueagi-io/hyperon-experimental/raw/master/docs/minimal-metta.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg> </a> <p>This document describes the minimal set of embedded MeTTa instructions which is designed to write the complete MeTTa interpreter in MeTTa. Current version of the document includes improvements which were added after experimenting with the first version of such an interpreter. It is not a final version and some directions of the future work is explained at the end of the document.</p> <h1 id=minimal-instruction-set>Minimal instruction set<a class=headerlink href=#minimal-instruction-set title="Permanent link">&para;</a></h1> <h2 id=interpreter-state>Interpreter state<a class=headerlink href=#interpreter-state title="Permanent link">&para;</a></h2> <p>The MeTTa interpreter evaluates an atom passed as an input. It evaluates it step by step executing a single instruction on each step. In order to do that the interpreter needs a context which is wider than the atom itself. The context also includes: - an atomspace which contains the knowledge which drives the evaluation of the expressions; - bindings of the variables which are used to evaluate expressions; the bindings are empty at the beginning (see <a href=#explicit-atomspace-variable-bindings>Explicit atomspace variable bindings</a>).</p> <p>Each step of interpretation inputs and outputs a list of pairs (<code>&lt;atom&gt;</code>, <code>&lt;bindings&gt;</code>) which is called interpretation plan. Each pair in the plan represents one possible way of interpreting the original atom or possible branch of the evaluation. Interpreter doesn't select one of them for further processing. It continues interpreting all of the branches in parallel. Below this is called non-deterministic evaluation.</p> <p>One step of the interpretation is an execution of a single instruction from a plan. An interpreter extracts atom and bindings from the plan and evaluates the atom. The result of the operation is a set of pairs (<code>&lt;atom&gt;</code>, <code>&lt;bindings&gt;</code>). Bindings of the result are merged with the previous bindings. Merge operation can also bring more than one result. Each such result is added as a separate pair into a result set. Finally all results from result set are added into the plan and step finishes.</p> <p>Here we suppose that on the top level the plan contains only the instructions from the minimal set. If an instruction returns the atom which is not from the minimal set it is not interpreted further and returned as a part of the final result. Thus only the instructions of the minimal set are considered a code other atoms are considered a data.</p> <h2 id=evaluation-order>Evaluation order<a class=headerlink href=#evaluation-order title="Permanent link">&para;</a></h2> <p>MeTTa implements the applicative evaluation order by default, arguments are evaluated before they are passed to the function. User can change this order using special meta-types as the types of the arguments. Minimal MeTTa operations don't rely on types and minimal MeTTa uses the fixed normal evaluation order, arguments are passed to the function without evaluation. But there is a <a href=#chain>chain</a> operation which can be used to evaluate an argument before passing it. Thus <code>chain</code> can be used to change evaluation order in MeTTa interpreter.</p> <h2 id=erroremptynotreducible>Error/Empty/NotReducible/()<a class=headerlink href=#erroremptynotreducible title="Permanent link">&para;</a></h2> <p>There are atoms which can be returned to designate a special situation in a code: - <code>(Error &lt;atom&gt; &lt;message&gt;)</code> means the interpretation is finished with error; - <code>Empty</code> means the corresponding branch of the evaluation returned no results, such result is not returned among other results when interpreting is finished; - <code>NotReducible</code> can be returned by <code>eval</code> in order to designate that function can not be reduced further; for example it can happen when code tries to call a type constructor (which has no definition), partially defined function (with argument values which are not handled), or grounded function which returns <code>NotReducible</code> explicitly; this atom is introduced to separate the situations when atom should be returned "as is" from <code>Empty</code> when atom should be removed from results; - Empty expression <code>()</code> is an instance of the unit type which is mainly used by functions with side effects which has no meaningful value to return.</p> <p>These atoms are not interpreted further as they are not a part of the minimal set of instructions and considered a data.</p> <h2 id=eval>eval<a class=headerlink href=#eval title="Permanent link">&para;</a></h2> <p><code>(eval &lt;atom&gt;)</code> is a first instruction which evaluates an atom passed as an argument. Evaluation is different for the grounded function calls (the expression with a grounded atom on a first position) and pure MeTTa expressions. For the pure MeTTa expression the interpreter searches the <code>(= &lt;atom&gt; &lt;var&gt;)</code> expression in the atomspace. The found values of the <code>&lt;var&gt;</code> are the result of evaluation. Execution of the grounded atom leads to the call of the foreign function passing the tail of the expression as arguments. For example <code>(+ 1 2)</code> calls the implementation of addition with <code>1</code> and <code>2</code> as arguments. The list of atoms returned by the grounded function is a result of the evaluation in this case. A grounded function can have side effects as well. In both cases bindings of the <code>eval</code>'s argument are merged to the bindings of the result.</p> <p>Atomspace search can bring the list of results which is empty. When search returns no results then <code>NotReducible</code> atom is a result of the instruction. Grounded function can return a list of atoms, empty result, <code>ExecError::Runtime(&lt;message&gt;)</code> or <code>ExecError::NoReduce</code> result. The result of the instruction for a special values are the following: - <code>ExecError::Runtime(&lt;message&gt;)</code> returns <code>(Error &lt;original-atom&gt; &lt;message&gt;)</code> atom; - <code>ExecError::NoReduce</code> returns <code>NotReducible</code> atom; - currently empty result removes result from the result set. It is done mainly for compatibility. There is no valid reason to return an empty result from a grounded function. Function can return <code>()/Empty/NotReducible</code> to express "no result"/"remove my result"/"not defined on data".</p> <h2 id=chain>chain<a class=headerlink href=#chain title="Permanent link">&para;</a></h2> <p>Minimal MeTTa implements normal evaluation order (see <a href=#evaluation-order>Evaluation order</a>. Arguments are passed to the function without evaluation. In case when argument should be evaluated before calling a function one can use <code>chain</code> instruction.</p> <p><code>chain</code>'s signature is <code>(chain &lt;atom&gt; &lt;var&gt; &lt;template&gt;)</code> and it is executed in two steps. <code>&lt;atom&gt;</code> argument is evaluated first and bindings of the evaluation result are merged to the bindings of the current result. After that <code>chain</code> substitutes all occurrences of <code>&lt;var&gt;</code> in <code>&lt;template&gt;</code> by the result of the evaluation and returns result of the substitution. When evaluation of the <code>&lt;atom&gt;</code> brings more than a single result <code>chain</code> returns one instance of the <code>&lt;template&gt;</code> expression for each result.</p> <h2 id=functionreturn>function/return<a class=headerlink href=#functionreturn title="Permanent link">&para;</a></h2> <p><code>function</code> operation has the signature <code>(function &lt;atom&gt;)</code>. It evaluates the <code>&lt;atom&gt;</code> until it becomes <code>(return &lt;atom&gt;)</code>. Then <code>(function (return &lt;atom&gt;))</code> expression returns the <code>&lt;atom&gt;</code>.</p> <p>These operations are introduced for two reasons. First it should be possible to evaluate an atom until some result and prevent further result evaluation. This aspect is discussed in <a href=#eval-or-return>eval or return</a> section.</p> <p>Second without having an abstraction of a function call it is difficult to debug the evaluation process. <code>function/return</code> allows representing nested function calls as a stack and provide controls to put the breakpoints on parts of this stack. Nevertheless using <code>chain</code> instead of <code>function</code> to implement the evaluation loop also allows representing stack in a natural form.</p> <h2 id=unify>unify<a class=headerlink href=#unify title="Permanent link">&para;</a></h2> <p><code>unify</code> operation allows conditioning on the results of the evaluation. <code>unify</code>'s signature is <code>(unify &lt;atom&gt; &lt;pattern&gt; &lt;then&gt; &lt;else&gt;)</code>. The operation matches <code>&lt;atom&gt;</code> with a <code>&lt;pattern&gt;</code>. If match is successful then it returns <code>&lt;then&gt;</code> atom and merges bindings of the original <code>&lt;atom&gt;</code> to resulting variable bindings. If matching is not successful then it returns the <code>&lt;else&gt;</code> branch with the original variable bindings.</p> <h2 id=cons-atomdecons-atom>cons-atom/decons-atom<a class=headerlink href=#cons-atomdecons-atom title="Permanent link">&para;</a></h2> <p><code>cons-atom</code> and <code>decons-atom</code> allows constructing and deconstructing the expression atom from/to pair of the head and tail. <code>(decons-atom &lt;expr&gt;)</code> expects non-empty expression as an argument and returns a pair <code>(&lt;head&gt; &lt;tail&gt;)</code>. <code>(cons-atom &lt;head&gt; &lt;tail&gt;)</code> returns an expression where the first sub-atom is <code>&lt;head&gt;</code> and others are copied from <code>&lt;tail&gt;</code>.</p> <h2 id=collapse-bind>collapse-bind<a class=headerlink href=#collapse-bind title="Permanent link">&para;</a></h2> <p><code>collapse-bind</code> has the signature <code>(collapse-bind &lt;atom&gt;)</code>. It evaluates the <code>&lt;atom&gt;</code> and returns an expression which contains all alternative evaluations in a form <code>(&lt;atom&gt; &lt;bindings&gt;)</code>. <code>&lt;bindings&gt;</code> are represented in a form of a grounded atom.</p> <p><code>collapse-bind</code> is part of the inference control provided by a minimal MeTTa interpreter. For example it can be used to get all alternative interpretations of the atom and filter out ones which led to errors.</p> <p>Name <code>collapse-bind</code> is temporary and chosen to eliminate conflict with <code>collapse</code> which is part of the standard library.</p> <h2 id=superpose-bind>superpose-bind<a class=headerlink href=#superpose-bind title="Permanent link">&para;</a></h2> <p><code>superpose-bind</code> has the signature <code>(superpose-bind ((&lt;atom&gt; &lt;bindings&gt;) ...))</code>. It puts list of the results into the interpreter plan each pair as a separate alternative.</p> <p><code>superpose-bind</code> is an operation which is complement to the <code>collapse-bind</code>. <code>superpose-bind</code> takes the result of the <code>collapse-bind</code> as an input. Thus user can collect the list of alternatives using <code>collapse-bind</code> filter them and return filtered items to the plan using <code>superpose-bind</code>.</p> <h1 id=examples>Examples<a class=headerlink href=#examples title="Permanent link">&para;</a></h1> <p>Examples of the programs written using minimal MeTTa interpreter:</p> <p>Recursive switch implementation:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>(= (switch $atom $cases)
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>  (function
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    (chain (decons-atom $cases) $list
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>      (chain (eval (switch-internal $atom $list)) $res
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>        (unify $res NotReducible (return Empty) (return $res)) ))))
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>(= (switch-internal $atom (($pattern $template) $tail))
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>  (function
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>    (unify $atom $pattern
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>      (return $template)
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>      (chain (eval (switch $atom $tail)) $ret (return $ret)) )))
</span></code></pre></div> <p>Evaluate atom in a loop until result is calculated:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>(= (subst $atom $var $templ)
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>  (unify $atom $var $templ
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>    (Error (subst $atom $var $templ)
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>      \&quot;subst expects a variable as a second argument\&quot;) ))
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>(= (reduce $atom $var $templ)
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>  (chain (eval $atom) $res
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>    (unify $res Empty
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>    Empty
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>    (unify $res (Error $a $m)
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>      (Error $a $m)
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>      (unify $res NotReducible
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>        (eval (subst $atom $var $templ))
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>        (eval (reduce $res $var $templ)) )))))
</span></code></pre></div> <p><a href=../lib/src/metta/runner/stdlib2.rs>Link</a> to the full code of the interpreter in MeTTa.</p> <h1 id=properties>Properties<a class=headerlink href=#properties title="Permanent link">&para;</a></h1> <h2 id=turing-completeness>Turing completeness<a class=headerlink href=#turing-completeness title="Permanent link">&para;</a></h2> <p>The following program implements a Turing machine using the minimal MeTTa instruction set (the full code of the example can be found <a href=../lib/src/metta/interpreter2.rs#L952-L995>here</a>):</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>(= (tm $rule $state $tape)
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>  (function (eval (tm-body $rule $state $tape))) )
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>(= (tm-body $rule $state $tape)
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>  (unify $state HALT
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>    (return $tape)
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>    (chain (eval (read $tape)) $char
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>      (chain (eval ($rule $state $char)) $res
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>        (unify $res ($next-state $next-char $dir)
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>          (chain (eval (move $tape $next-char $dir)) $next-tape
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a>            (eval (tm-body $rule $next-state $next-tape)) )
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a>          (return (Error (tm-body $rule $state $tape) \&quot;Incorrect state\&quot;)) )))))
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a>
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a>(= (read ($head $hole $tail)) $hole)
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a>
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a>(= (move ($head $hole $tail) $char N) ($head $char $tail))
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a>(= (move ($head $hole $tail) $char L) (function
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a>  (chain (cons-atom $char $head) $next-head
</span><span id=__span-2-19><a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a>    (chain (decons-atom $tail) $list
</span><span id=__span-2-20><a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a>      (unify $list ($next-hole $next-tail)
</span><span id=__span-2-21><a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a>        (return ($next-head $next-hole $next-tail))
</span><span id=__span-2-22><a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a>        (return ($next-head 0 ())) )))))
</span><span id=__span-2-23><a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a>(= (move ($head $hole $tail) $char R) (function
</span><span id=__span-2-24><a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a>  (chain (cons-atom $char $tail) $next-tail
</span><span id=__span-2-25><a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a>    (chain (decons-atom $head) $list
</span><span id=__span-2-26><a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a>      (unify $list ($next-hole $next-head)
</span><span id=__span-2-27><a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a>        (return ($next-head $next-hole $next-tail))
</span><span id=__span-2-28><a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a>        (return (() 0 $next-tail)) )))))
</span></code></pre></div> <h2 id=comparison-with-metta-operational-semantics>Comparison with MeTTa Operational Semantics<a class=headerlink href=#comparison-with-metta-operational-semantics title="Permanent link">&para;</a></h2> <p>One difference from MOPS [1] is that the minimal instruction set allows relatively easy write deterministic programs and non-determinism is injected only via matching and evaluation. <code>Query</code> and <code>Chain</code> from MOPS are very similar to <code>eval</code>. <code>Transform</code> is very similar to <code>unify</code>. <code>chain</code> has no analogue in MOPS. <code>cons-atom</code>/<code>decons-atom</code> to some extent are analogues of <code>AtomAdd</code>/<code>AtomRemove</code> in a sense that they can be used to change the state.</p> <h2 id=partial-and-complete-functions>Partial and complete functions<a class=headerlink href=#partial-and-complete-functions title="Permanent link">&para;</a></h2> <p>Each instruction in a minimal instruction set is a total function. Nevertheless <code>Empty</code> allows defining partial functions in MeTTa. For example partial <code>if</code> can be defined as follows: <div class="language-text highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>(= (if $condition $then) (unify $condition True $then Empty))
</span></code></pre></div></p> <h2 id=eval-or-return>eval or return<a class=headerlink href=#eval-or-return title="Permanent link">&para;</a></h2> <p>Using <code>eval</code> to designate evaluation of the atom seems too verbose. But we need to give a programmer some way to designate whether the atom should be evaluated or not. <code>eval</code> marks atoms which should be evaluated. As an alternative to this solution we could mark atoms which should not be evaluated.</p> <p>Another related issue is that we need ability to make complex evaluations before making a substitution inside <code>chain</code>. For example <code>(chain (eval (foo a)) $x $x)</code> should be able to make and fully evaluate the call of the <code>foo</code> function before inserting the result into the template. We need to define the criteria which specifies when the nested operation is finished and what is the result. Also we need to be able represent evaluation loop inside the code.</p> <p>First version of the minimal interpreter continued the evaluation of the first argument of the <code>chain</code> until it becomes a non-minimal MeTTa instruction. But this approach is too verbose. If it is needed to chain some minimal MeTTa instruction without evaluation then such instruction should be wrapped into a non-minimal MeTTa expression and unwrapped after the substitution is made.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>  (chain (quote (eval (foo))) $x
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>    (unify $x (quote $y)
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>      $y
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>      (Error $x &quot;quote expression expected&quot;) ))
</span></code></pre></div> <p>To allow <code>chain</code> relying on the returned result of the first argument the <code>function/return</code> operations are introduced. When user needs to run a complex evaluation inside chain he may wrap it into the <code>function</code> operation. <code>function</code> evaluates its argument in a loop until <code>(return &lt;atom&gt;)</code> is returned. Then it returns the <code>&lt;atom&gt;</code> as a result. If one need to make a substitution it is possible using:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>  (chain (function (return &lt;atom&gt;)) &lt;var&gt; &lt;templ&gt;)
</span></code></pre></div> <p>One more option is to make <code>chain</code> (and other atoms which can have nested evaluation loops) recognize <code>return</code>. In such case the evaluation loop is executed by the <code>chain</code> itself and <code>function</code> instruction is not needed. Substitution gets the simpler form:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>  (chain (return &lt;atom&gt;) &lt;var&gt; &lt;templ&gt;)
</span></code></pre></div> <p>The downside of this approach is that loop represented by the outer operation <code>chain</code> and end of the loop represented by <code>return</code> are written in different contexts. Thus programmer should keep in mind that when some function is used from <code>chain</code> and it is not just a equality substitution then <code>return</code> should be used on each exit path while nothing in code of function points to this. Using <code>function</code> operation allows dividing functions on two classes: - functions which evaluate result in a loop and have to use <code>return</code>; - functions which just replace the calling expression by their bodies.</p> <h1 id=future-work>Future work<a class=headerlink href=#future-work title="Permanent link">&para;</a></h1> <h2 id=explicit-atomspace-variable-bindings>Explicit atomspace variable bindings<a class=headerlink href=#explicit-atomspace-variable-bindings title="Permanent link">&para;</a></h2> <p>Current implementation implicitly keeps and applies variable bindings during the process of the interpretation. Explicit bindings are used to implement <code>collapse-bind</code> where they are absolutely necessary. Bindings can be easily made explicit everywhere but the value of explicit bindings is not obvious see [discussion in issue</p> <h1 id=290httpsgithubcomtrueagi-iohyperon-experimentalissues290issuecomment-1541314289>290](<a href=https://github.com/trueagi-io/hyperon-experimental/issues/290#issuecomment-1541314289>https://github.com/trueagi-io/hyperon-experimental/issues/290#issuecomment-1541314289</a>).<a class=headerlink href=#290httpsgithubcomtrueagi-iohyperon-experimentalissues290issuecomment-1541314289 title="Permanent link">&para;</a></h1> <p>Making atomspace part of the explicit context could make import semantics more straightforward. In the current implementation of the minimal instruction set it is needed to explicitly pass the atomspace to the interpreter because otherwise grounded <code>get-type</code> function didn't work properly. It also could allow defining <code>eval</code> via <code>unify</code> which minimizes the number of instructions and allows defining <code>eval</code> in a MeTTa program itself. Which in turn allows defining different versions of <code>eval</code> to program different kinds of chaining. Nevertheless defining <code>eval</code> through <code>unify</code> requires rework of the grounded functions interface to allow calling them by executing <code>unify</code> instructions. Which is an interesting direction to follow.</p> <h2 id=scope-of-variables>Scope of variables<a class=headerlink href=#scope-of-variables title="Permanent link">&para;</a></h2> <p>Scope of the variable inside instructions is not described in this specification. It is a clear gap and one of the TODO items.</p> <h2 id=special-matching-syntax>Special matching syntax<a class=headerlink href=#special-matching-syntax title="Permanent link">&para;</a></h2> <p>Sometimes it is convenient to change the semantics of the matching within a pattern. Some real examples are provided below. One possible way to extend matching syntax is embrace atoms by expressions with matching modifier on a first position. For instance <code>(:&lt;mod&gt; &lt;atom&gt;)</code> could apply <code>&lt;mod&gt;</code> rule to match the <code>&lt;atom&gt;</code>. How to eliminate interference of this syntax with symbol atoms used by programmers is an open question.</p> <h3 id=syntax-to-match-atom-by-equality>Syntax to match atom by equality<a class=headerlink href=#syntax-to-match-atom-by-equality title="Permanent link">&para;</a></h3> <p>In many situations we need to check that atom is equal to some symbol. <code>unify</code> doesn't work well in such cases because when checked atom is a variable it is matched with anything (for instance <code>(unify $x Empty then else)</code> returns <code>then</code>). It would be convenient to have a special syntax to match the atom by equality. For instance <code>(unify &lt;atom&gt; (:= Empty) then else)</code> should match <code>&lt;atom&gt;</code> with pattern only when <code>&lt;atom&gt;</code> is <code>Empty</code>.</p> <h3 id=syntax-to-match-part-of-the-expression>Syntax to match part of the expression<a class=headerlink href=#syntax-to-match-part-of-the-expression title="Permanent link">&para;</a></h3> <p>We could have a specific syntax which would allow matching part of the expressions. For example such syntax could be used to match head and tail of the expression without using <code>cons-atom</code>/<code>decons-atom</code>. Another example is matching part of the expression with some gap, i.e. <code>(A ... D ...)</code> could match <code>(A B C D E)</code> atom.</p> <h1 id=links>Links<a class=headerlink href=#links title="Permanent link">&para;</a></h1> <ol> <li>Lucius Gregory Meredith, Ben Goertzel, Jonathan Warrell, and Adam Vandervorst. Meta-MeTTa: an operational semantics for MeTTa. <a href=https://raw.githubusercontent.com/leithaus/rho4u/main/ai/mops/mops.pdf>https://raw.githubusercontent.com/leithaus/rho4u/main/ai/mops/mops.pdf</a></li> </ol> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../CONTRIBUTING/ class="md-footer__link md-footer__link--next" aria-label="Next: Contribution"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Contribution </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2023 <a href=https://github.com/trueagi-io/hyperon-experimental target=_blank rel=noopener>OpenCog Hyperon</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/trueagi-io/hyperon-experimental target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://twitter.com/OpenCog target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.e1c3ead8.min.js></script> </body> </html>